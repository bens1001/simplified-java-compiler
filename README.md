**Simplified Java Compiler**
--- 

A small-scale compiler for a Java-like language (covering a subset of Java’s syntax and types), implemented using Flex (lexer) and Bison (parser), with intermediate quadruple generation and an x86 assembly emitter. This repository contains all source files—lexer specification (`lexical.l`), parser grammar with semantic actions (`syntaxique.y`), data‐structure headers (`ts.h`, `quad.h`, `assembly.h`), a Windows build script (`commande.bat`), sample inputs (`EXAMPLE.txt`, `EXAMPLE2.txt`, `EXAMPLE3.txt`), and a reference assembly output (`example.asm`). Everything you need to build and experiment with the compiler is included here, without any external C/C++ source files.

---

## Repository Overview

```
simplified-java-compiler/
├── .gitignore
├── EXAMPLE.txt
├── EXAMPLE2.txt
├── EXAMPLE3.txt
├── assembly.h
├── commande.bat
├── example.asm
├── lexical.l
├── quad.h
├── syntaxique.y
└── ts.h
```

* **`lexical.l`**: Flex specification for tokenizing Java‐like source files.
* **`syntaxique.y`**: Bison grammar (Yacc) with embedded C semantic actions. Parses tokens from `lexical.l`, populates a symbol table, emits intermediate quadruples, and calls the assembly generator.
* **`ts.h`**: Symbol‐table header. Defines a simple table to track identifiers, their types, and addresses/offsets.
* **`quad.h`**: Quadruple data‐structures and helper functions. Represents operations in a four‐field format `(op, arg1, arg2, result)`.
* **`assembly.h`**: Prototype declarations for emitting x86 assembly from the generated quadruple list.
* **`commande.bat`**: Windows‐only batch script automating Flex → Bison → compile → link steps. Produces `compiler.exe`.
* **`EXAMPLE.txt`, `EXAMPLE2.txt`, `EXAMPLE3.txt`**: Sample “.txt” source files written in the compiler’s supported Java subset. Each demonstrates variable declarations, control flow, expressions, and print statements.
* **`example.asm`**: Reference assembly output (x86, AT\&T syntax) generated by running the compiler on `EXAMPLE.txt`.

---

## Supported Features & Language Subset

This compiler targets a **small subset** of the Java language. Features that exist in the codebase include:

1. **Primitive Types & Literals**

   * **`boolean`** (tokens `TRUE`, `FALSE`, `true`, `false`)
   * **`char`**, **`int`**, **`float`**, **`double`**
   * **Integer literals** (range -32768 to 32767)
   * **Floating‐point literals** (handled as `float` or `double` depending on range/precision)
   * **String literals** (enclosed in double (`"..."`) or single (`'...'`) quotes)

2. **Keywords**

   * Types/Declarations: `class`, `public`, `static`, `void`, `int`, `boolean`, `char`, `float`, `double`, `new`, `return`
   * Control Flow: `if`, `else`, `for`, `while`, `do`, `switch`, `case`, `default`, `break`, `continue`, `try`, `catch`, `finally`
   * I/O: `System.out.print`, `System.out.println`

3. **Identifiers** (`IDF`):

   * Names beginning with a letter (`[A-Za-z]`), followed by letters or digits. Max length enforced at 256 characters.

4. **Operators & Separators**

   * **Arithmetic**: `+`, `-`, `*`, `/`, `%`
   * **Relational**: `==`, `!=`, `<`, `<=`, `>`, `>=`
   * **Logical**: `&&`, `||`, `!`
   * **Assignment**: `=`
   * **Delimiters**: `;`, `,`, `(`, `)`, `{`, `}`, `[`, `]`, `.`, `:`

5. **Comments**

   * Single‐line comments starting with `//` (ignored by the lexer).

6. **Symbol Table**
   
   * Tracks each declared identifier’s name, type, and an integer “address” (an index in the table).
   * Duplicate declarations and uses of undeclared variables produce compile‐time errors.

8. **Intermediate Representation (Quadruples)**

   * Each operation (literal assignment, arithmetic, comparison, jump, print, etc.) is turned into a **quadruple** `(op, arg1, arg2, result)`.

9. **Assembly Generation (x86, AT\&T syntax)**

   * After quadruple generation, the compiler calls a C routine from `assembly.h` to traverse the quad list and emit x86 instructions.

Anything **not** listed above (e.g., classes beyond one top‐level class, generics, full object‐oriented features, 64‐bit code, advanced I/O) is explicitly **not** supported in this codebase.

---

## Prerequisites

To build and run this compiler, you need:

1. **Flex (Lexer Generator)**

2. **Bison (Parser Generator)**

3. **GCC (or Compatible C Compiler)**

---

## Building the Compiler

### Windows (commande.bat)

1. **Open a Windows Shell** (Command Prompt, PowerShell, or MSYS2/Cygwin terminal).

2. **`cd`** into the cloned repository directory:

   ```bat
   cd path\to\simplified-java-compiler
   ```

3. **Run the build script**:

   ```bat
   commande.bat
   ```

   * This batch script does the following steps in order:

     1. `flex lexical.l` → generates `lex.yy.c`
     2. `bison -d syntaxique.y` → generates `syntaxique.tab.c` and `syntaxique.tab.h`
     3. `gcc -c lex.yy.c -o lex.yy.o`
     4. `gcc -c syntaxique.tab.c -o syntaxique.tab.o`
     5. Links `lex.yy.o` and `syntaxique.tab.o` (Flex’s library `-lfl` is included automatically) into `compiler.exe`.
   * If all tools are in your `PATH`, you will end up with `compiler.exe` in the same directory, with no errors.

4. **Verify**:

   ```bat
   compiler.exe EXAMPLE.txt < EXAMPLE.txt
   ```

   * On success, you should see something like:


   ```
    Code compiled correctly.
   ```
   

    /************\************* Table des symboles (IDF et constantes) ************\*************/
   
            |                  Nom_Entite                   |       Code_Entite     |       Type_Entite    |  Val_Entite  |  Taille    | Dimensions | Num_Params |                           Scope                          |
            |-----------------------------------------------|-----------------------|----------------------|--------------|------------|------------|------------|----------------------------------------------------------|
            |                                    ArrayTools |                 Class |                    - |            - |          - |          - |          - |                                                   GLOBAL |
            |                                       example |               Package |                    - |            - |          - |          - |          - |                                                   GLOBAL |
            |                                           edu |               Package |                    - |            - |          - |          - |          - |                                                   GLOBAL |
            |                                     CharUtils |                 Class |                    - |            - |          - |          - |          - |                                                   GLOBAL |
            |                                        Person |                 Class |                    - |            - |          - |          - |          - |                                                   GLOBAL |
            |                                           age |             Attribute |                  int |            - |          - |          0 |          - |                                                   Person |
            |                                             1 |              Constant |                  int |            - |          - |          - |          - |                                                        - |
            |                                        gender |             Attribute |              char[1] |            - |          1 |          1 |          - |                                                   Person |
            |                                     isStudent |             Attribute |              boolean |            - |          - |          0 |          - |                                                   Person |
            |                                             7 |              Constant |                  int |            - |          - |          - |          - |                                                        - |
            |                                             8 |              Constant |                  int |            - |          - |          - |          - |                                                        - |
            |                                             5 |              Constant |                  int |            - |          - |          - |          - |                                                        - |
            |                                             2 |              Constant |                  int |            - |          - |          - |          - |                                                        - |
            |                                        grades |             Attribute |      int[7][8][5][2] |            - |        560 |          4 |          - |                                                   Person |
            |                                        grades |             Parameter |      int[7][8][5][2] |            - |        560 |          4 |          0 |                                                   Person |
            |                                     isStudent |             Parameter |              boolean |            - |          - |          0 |          0 |                                                   Person |
            |                                        gender |             Parameter |              char[1] |            - |          1 |          1 |          0 |                                                   Person |
            |                                           age |             Parameter |                  int |            - |          - |          0 |          0 |                                                   Person |
            |                                        Person |           Constructor |                    - |            - |          - |          - |          4 |                                                   Person |
            |                                             b |              Variable |                  int |         NULL |          - |          0 |          - |                                           Person.display |
            |                                             k |              Variable |                  int |         NULL |          - |          0 |          - |                                           Person.display |
            |                                             0 |              Constant |                  int |            - |          - |          - |          - |                                                        - |
            |                                             j |              Variable |                  int |              |          - |          0 |          - |                                Person.display.for_loop_1 |
            |                                            50 |              Constant |                  int |            - |          - |          - |          - |                                                        - |
            |                                             j |              Variable |                  int |              |          - |          0 |          - |                     Person.display.for_loop_1.for_loop_2 |
            |                                         false |                   IDF |              boolean |            - |          - |          - |          - |                                                        - |
            |                                             i |              Variable |                  int |         NULL |          - |          0 |          - |                                           Person.display |
            |                                       display |                Method |                 void |            - |          - |          - |          0 |                                                   Person |
            |                                        Course |                 Class |                    - |            - |          - |          - |          - |                                                   GLOBAL |
            |                                             6 |              Constant |                  int |            - |          - |          - |          - |                                                        - |
            |                                          code |             Attribute |              char[6] |            - |          6 |          1 |          - |                                                   Course |
            |                                      duration |             Attribute |                  int |            - |          - |          0 |          - |                                                   Course |
            |                                      duration |             Parameter |                  int |            - |          - |          0 |          0 |                                                   Course |
            |                                          code |             Parameter |              char[6] |            - |          6 |          1 |          0 |                                                   Course |
            |                                        Course |           Constructor |                    - |            - |          - |          - |          2 |                                                   Course |
            |                                             i |              Variable |                  int |         NULL |          - |          0 |          - |                                         Course.printCode |
            |                                     printCode |                Method |                 void |            - |          - |          - |          0 |                                                   Course |
            |                                     GradeBook |                 Class |                    - |            - |          - |          - |          - |                                                   GLOBAL |
            |                                            10 |              Constant |                  int |            - |          - |          - |          - |                                                        - |
            |                                        scores |             Attribute |           int[10][5] |            - |         50 |          2 |          - |                                                GradeBook |
            |                                        scores |             Parameter |           int[10][5] |            - |         50 |          2 |          0 |                                                GradeBook |
            |                                     GradeBook |           Constructor |                    - |            - |          - |          - |          1 |                                                GradeBook |
            |                                             i |              Variable |                  int |              |          - |          0 |          - |                       GradeBook.processGrades.for_loop_1 |
            |                                             j |              Variable |                  int |              |          - |          0 |          - |            GradeBook.processGrades.for_loop_1.for_loop_2 |
            |                               "Invalid grade" |        Output Message |             char[13] |            - |         13 |          1 |          - |                                                        - |
            |                                             i |              Variable |                  int |         NULL |          - |          0 |          - |                                  GradeBook.processGrades |
            |                                 processGrades |                Method |                 void |            - |          - |          - |          0 |                                                GradeBook |
            |                                       Student |                 Class |                    - |            - |          - |          - |          - |                                                   GLOBAL |
            |                                         names |             Attribute |                  int |            - |          - |          0 |          - |                                                  Student |
            |                                       courses |             Attribute |               Course |            - |          - |          0 |          - |                                                  Student |
            |                                       courses |             Parameter |               Course |            - |          - |          0 |          0 |                                                  Student |
            |                                         names |             Parameter |                  int |            - |          - |          0 |          0 |                                                  Student |
            |                                       Student |           Constructor |                    - |            - |          - |          - |          2 |                                                  Student |
            |                                             i |              Variable |                  int |              |          - |          0 |          - |                       Student.validateCourses.for_loop_1 |
            |                                 "Long course" |        Output Message |             char[11] |            - |         11 |          1 |          - |                                                        - |
            |                               validateCourses |                Method |                  int |            - |          - |          - |          0 |                                                  Student |
            |                                    Attendance |                 Class |                    - |            - |          - |          - |          - |                                                   GLOBAL |
            |                                       records |             Attribute |            int[5][7] |            - |         35 |          2 |          - |                                               Attendance |
            |                                       records |             Parameter |            int[5][7] |            - |         35 |          2 |          0 |                                               Attendance |
            |                                    Attendance |           Constructor |                    - |            - |          - |          - |          1 |                                               Attendance |
            |                                             i |              Variable |                  int |              |          - |          0 |          - |                    Attendance.checkAttendance.for_loop_1 |
            |                                             j |              Variable |                  int |              |          - |          0 |          - |         Attendance.checkAttendance.for_loop_1.for_loop_2 |
            |                                    "Present " |        Output Message |              char[8] |            - |          8 |          1 |          - |                                                        - |
            |                                     "Absent " |        Output Message |              char[7] |            - |          7 |          1 |          - |                                                        - |
            |                               checkAttendance |                Method |                 void |            - |          - |          - |          0 |                                               Attendance |
            |                                        grades |              Variable |      int[7][8][5][2] |         NULL |        560 |          4 |          - |                                                     Main |
            |                                            23 |              Constant |                  int |            - |          - |          - |          - |                                                        - |
            |                                            12 |              Constant |                  int |            - |          - |          - |          - |                                                        - |
            |                                            p1 |              Variable |               Person |         NULL |          - |          0 |          - |                                                     Main |
            |                                            20 |              Constant |                  int |            - |          - |          - |          - |                                                        - |
            |                                           'M' |                String |              char[1] |            - |          1 |          1 |          - |                                                        - |
            |                                          true |                   IDF |              boolean |            - |          - |          - |          - |                                                        - |
            |                                    courseCode |              Variable |              char[6] |         NULL |          6 |          1 |          - |                                                     Main |
            |                                           'C' |                String |              char[1] |            - |          1 |          1 |          - |                                                        - |
            |                                           'S' |                String |              char[1] |            - |          1 |          1 |          - |                                                        - |
            |                                           '1' |                String |              char[1] |            - |          1 |          1 |          - |                                                        - |
            |                                           '0' |                String |              char[1] |            - |          1 |          1 |          - |                                                        - |
            |                                         cs101 |              Variable |               Course |         NULL |          - |          0 |          - |                                                     Main |
            |                                             4 |              Constant |                  int |            - |          - |          - |          - |                                                        - |
            |                                             x |              Variable |                  int |          T30 |          - |          0 |          - |                                                     Main |
            |                                   studentCode |              Variable |                  int |         NULL |          - |          0 |          - |                                                     Main |
            |                                             s |              Variable |              Student |         NULL |          - |          0 |          - |                                                     Main |
            |                                             v |              Variable |              boolean |         NULL |          - |          0 |          - |                                                     Main |
            |                                        result |              Variable |                  int |         NULL |          - |          0 |          - |                                                     Main |
            |                           ArithmeticException |        Exception Type |                    - |            - |          - |          - |          - |                                                     Main |
            |                                             e |             Parameter |  ArithmeticException |            - |          - |          - |          - |                                                     Main |
            |                         "An error occurred: " |        Output Message |             char[19] |            - |         19 |          1 |          - |                                                        - |
            |                        "Execution completed." |        Output Message |             char[20] |            - |         20 |          1 |          - |                                                        - |

    /************\*************Table des symboles mots cles************\*************/
   
            |                  Nom_Entite                   |  CodeEntite |
            |-----------------------------------------------|-------------|
            |                                        import |     Keyword |
            |                                         class |     Keyword |
            |                                           int |     Keyword |
            |                                          char |     Keyword |
            |                                       boolean |     Keyword |
            |                                          this |     Keyword |
            |                                          void |     Keyword |
            |                                            do |     Keyword |
            |                                           for |     Keyword |
            |                            System.out.println |     Keyword |
            |                                         while |     Keyword |
            |                                            if |     Keyword |
            |                                          else |     Keyword |
            |                                        return |     Keyword |
            |                              System.out.print |     Keyword |
            |                                          Main |     Keyword |
            |                                        public |     Keyword |
            |                                        static |     Keyword |
            |                                          main |     Keyword |
            |                                           new |     Keyword |
            |                                           try |     Keyword |
            |                                         catch |     Keyword |
            |                                       finally |     Keyword |

    /************\*************Table des symboles separateurs************\*************/

            | NomEntite |  CodeEntite |
            |-----------|-------------|
            |         . |  Separateur |
            |         ; |  Separateur |
            |         { |  Separateur |
            |         [ |  Separateur |
            |         ] |  Separateur |
            |         ( |  Separateur |
            |         , |  Separateur |
            |         ) |  Separateur |
            |         = |  Separateur |
            |         } |  Separateur |
            |         + |  Separateur |
            |         < |  Separateur |
            |        == |  Separateur |
            |         - |  Separateur |
            |         > |  Separateur |
            |         / |  Separateur |
   ```

    ~~~~~~~~~~~~~~~~~~~~ Les Quadruplets ~~~~~~~~~~~~~~~~~~~~

    0 - ( BR  ,  64  ,  <vide>  ,  <vide> )
    --------------------------------------------

    1 - ( =  ,  1  ,  <vide>  ,  b )
    --------------------------------------------

    2 - ( =  ,  0  ,  <vide>  ,  k )
    --------------------------------------------

    3 - ( +  ,  b  ,  1  ,  T0 )
    --------------------------------------------

    4 - ( =  ,  T0  ,  <vide>  ,  b )
    --------------------------------------------

    5 - ( =  ,  0  ,  <vide>  ,  j )
    --------------------------------------------

    6 - ( BGE  ,  17  ,  j  ,  50 )
    --------------------------------------------

    7 - ( +  ,  j  ,  1  ,  T2 )
    --------------------------------------------

    8 - ( =  ,  T2  ,  <vide>  ,  j )
    --------------------------------------------

    9 - ( =  ,  0  ,  <vide>  ,  j )
    --------------------------------------------

    10 - ( BGE  ,  16  ,  j  ,  2 )
    --------------------------------------------

    11 - ( +  ,  j  ,  1  ,  T4 )
    --------------------------------------------

    12 - ( =  ,  T4  ,  <vide>  ,  j )
    --------------------------------------------

    13 - ( +  ,  k  ,  1  ,  T5 )
    --------------------------------------------

    14 - ( =  ,  T5  ,  <vide>  ,  k )
    --------------------------------------------

    15 - ( BR  ,  10  ,  <vide>  ,  <vide> )
    --------------------------------------------

    16 - ( BR  ,  3  ,  <vide>  ,  <vide> )
    --------------------------------------------

    17 - ( =  ,  1  ,  <vide>  ,  i )
    --------------------------------------------

    18 - ( BR  ,  77  ,  <vide>  ,  <vide> )
    --------------------------------------------

    19 - ( BGE  ,  23  ,  i  ,  6 )
    --------------------------------------------

    20 - ( +  ,  i  ,  1  ,  T7 )
    --------------------------------------------

    21 - ( =  ,  T7  ,  <vide>  ,  i )
    --------------------------------------------

    22 - ( BR  ,  19  ,  <vide>  ,  <vide> )
    --------------------------------------------

    23 - ( BR  ,     ,  <vide>  ,  <vide> )
    --------------------------------------------

    24 - ( =  ,  0  ,  <vide>  ,  i )
    --------------------------------------------

    25 - ( BGE  ,  39  ,  i  ,  10 )
    --------------------------------------------

    26 - ( +  ,  i  ,  1  ,  T9 )
    --------------------------------------------

    27 - ( =  ,  T9  ,  <vide>  ,  i )
    --------------------------------------------

    28 - ( =  ,  0  ,  <vide>  ,  j )
    --------------------------------------------

    29 - ( BGE  ,  38  ,  j  ,  5 )
    --------------------------------------------

    30 - ( +  ,  j  ,  1  ,  T11 )
    --------------------------------------------

    31 - ( =  ,  T11  ,  <vide>  ,  j )
    --------------------------------------------

    32 - ( BNE  ,  37  ,  i  ,  5 )
    --------------------------------------------

    33 - ( +  ,  i  ,  1  ,  T13 )
    --------------------------------------------

    34 - ( =  ,  T13  ,  <vide>  ,  i )
    --------------------------------------------

    35 - ( -  ,  i  ,  1  ,  T14 )
    --------------------------------------------

    36 - ( =  ,  T14  ,  <vide>  ,  i )
    --------------------------------------------

    37 - ( BR  ,  29  ,  <vide>  ,  <vide> )
    --------------------------------------------

    38 - ( BR  ,  25  ,  <vide>  ,  <vide> )
    --------------------------------------------

    39 - ( =  ,  1  ,  <vide>  ,  i )
    --------------------------------------------

    40 - ( BR  ,     ,  <vide>  ,  <vide> )
    --------------------------------------------

    41 - ( =  ,  0  ,  <vide>  ,  i )
    --------------------------------------------

    42 - ( BGE  ,  47  ,  i  ,  5 )
    --------------------------------------------

    43 - ( +  ,  i  ,  1  ,  T16 )
    --------------------------------------------

    44 - ( =  ,  T16  ,  <vide>  ,  i )
    --------------------------------------------

    45 - ( BLE  ,  46  ,  i  ,  2 )
    --------------------------------------------

    46 - ( BR  ,  42  ,  <vide>  ,  <vide> )
    --------------------------------------------

    47 - ( BR  ,  90  ,  <vide>  ,  <vide> )
    --------------------------------------------

    48 - ( =  ,  0  ,  <vide>  ,  i )
    --------------------------------------------

    49 - ( BGE  ,  63  ,  i  ,  5 )
    --------------------------------------------

    50 - ( +  ,  i  ,  1  ,  T19 )
    --------------------------------------------

    51 - ( =  ,  T19  ,  <vide>  ,  i )
    --------------------------------------------

    52 - ( =  ,  0  ,  <vide>  ,  j )
    --------------------------------------------

    53 - ( BGE  ,  62  ,  j  ,  7 )
    --------------------------------------------

    54 - ( +  ,  j  ,  1  ,  T21 )
    --------------------------------------------

    55 - ( =  ,  T21  ,  <vide>  ,  j )
    --------------------------------------------

    56 - ( BLE  ,  61  ,  j  ,  5 )
    --------------------------------------------

    57 - ( +  ,  i  ,  1  ,  T23 )
    --------------------------------------------

    58 - ( =  ,  T23  ,  <vide>  ,  i )
    --------------------------------------------

    59 - ( -  ,  i  ,  1  ,  T24 )
    --------------------------------------------

    60 - ( =  ,  T24  ,  <vide>  ,  i )
    --------------------------------------------

    61 - ( BR  ,  53  ,  <vide>  ,  <vide> )
    --------------------------------------------

    62 - ( BR  ,  49  ,  <vide>  ,  <vide> )
    --------------------------------------------

    63 - ( BR  ,     ,  <vide>  ,  <vide> )
    --------------------------------------------

    64 - ( BOUNDS  ,  1  ,  7  ,  <vide> )
    --------------------------------------------

    65 - ( BOUNDS  ,  2  ,  8  ,  <vide> )
    --------------------------------------------

    66 - ( BOUNDS  ,  3  ,  5  ,  <vide> )
    --------------------------------------------

    67 - ( BOUNDS  ,  4  ,  2  ,  <vide> )
    --------------------------------------------

    68 - ( ADEC  ,  grades  ,  <vide>  ,  <vide> )
    --------------------------------------------

    69 - ( =  ,  T25  ,  <vide>  ,  grades )
    --------------------------------------------

    70 - ( NEW  ,  Person  ,  <vide>  ,  p1 )
    --------------------------------------------

    71 - ( =  ,  age  ,  <vide>  ,  p1_age )
    --------------------------------------------

    72 - ( =  ,  gender  ,  <vide>  ,  p1_gender )
    --------------------------------------------

    73 - ( =  ,  isStudent  ,  <vide>  ,  p1_isStudent )
    --------------------------------------------

    74 - ( =  ,  grades  ,  <vide>  ,  p1_grades )
    --------------------------------------------

    75 - ( =  ,  T26  ,  <vide>  ,  p1 )
    --------------------------------------------

    76 - ( BR  ,  1  ,  <vide>  ,  <vide> )
    --------------------------------------------

    77 - ( BOUNDS  ,  1  ,  6  ,  <vide> )
    --------------------------------------------

    78 - ( ADEC  ,  courseCode  ,  <vide>  ,  <vide> )
    --------------------------------------------

    79 - ( =  ,  T27  ,  <vide>  ,  courseCode )
    --------------------------------------------

    80 - ( NEW  ,  Course  ,  <vide>  ,  cs101 )
    --------------------------------------------

    81 - ( =  ,  code  ,  <vide>  ,  cs101_code )
    --------------------------------------------

    82 - ( =  ,  duration  ,  <vide>  ,  cs101_duration )
    --------------------------------------------

    83 - ( =  ,  T28  ,  <vide>  ,  cs101 )
    --------------------------------------------

    84 - ( =  ,  5  ,  <vide>  ,  studentCode )
    --------------------------------------------

    85 - ( NEW  ,  Student  ,  <vide>  ,  s )
    --------------------------------------------

    86 - ( =  ,  names  ,  <vide>  ,  s_names )
    --------------------------------------------

    87 - ( =  ,  courses  ,  <vide>  ,  s_courses )
    --------------------------------------------

    88 - ( =  ,  T29  ,  <vide>  ,  s )
    --------------------------------------------

    89 - ( BR  ,  41  ,  <vide>  ,  <vide> )
    --------------------------------------------

    90 - ( =  ,  T30  ,  <vide>  ,  x )
    --------------------------------------------

    91 - ( =  ,  96  ,  <vide>  ,  v )
    --------------------------------------------

    92 - ( +  ,  x  ,  1  ,  T31 )
    --------------------------------------------

    93 - ( =  ,  T31  ,  <vide>  ,  x )
    --------------------------------------------

    94 - ( -  ,  x  ,  1  ,  T32 )
    --------------------------------------------

    95 - ( =  ,  T32  ,  <vide>  ,  x )
    --------------------------------------------

    96 - ( /  ,  10  ,  5  ,  T33 )
    --------------------------------------------

    97 - ( =  ,  0  ,  <vide>  ,  result )
    --------------------------------------------

    98 - ( BR  ,     ,  <vide>  ,  <vide> )
    --------------------------------------------

   ```

   ```

    1) b = 1
    2) k = 0
    3) T0 = b + 1
    4) b = T0
    5) j = 0
    7) T2 = j + 1
    8) j = T2
    9) j = 0
    11) T4 = j + 1
    12) j = T4
    13) T5 = k + 1
    14) k = T5
    17) i = 1
    20) T7 = i + 1
    21) i = T7
    24) i = 0
    26) T9 = i + 1
    27) i = T9
    28) j = 0
    30) T11 = j + 1
    31) j = T11
    33) T13 = i + 1
    34) i = T13
    35) T14 = i - 1
    36) i = T14
    39) i = 1
    41) i = 0
    43) T16 = i + 1
    44) i = T16
    48) i = 0
    50) T19 = i + 1
    51) i = T19
    52) j = 0
    54) T21 = j + 1
    55) j = T21
    57) T23 = i + 1
    58) i = T23
    59) T24 = i - 1
    60) i = T24
    69) grades = T25
    71) p1_age = age
    72) p1_gender = gender
    73) p1_isStudent = isStudent
    74) p1_grades = grades
    75) p1 = T26
    79) courseCode = T27
    81) cs101_code = code
    82) cs101_duration = duration
    83) cs101 = T28
    84) studentCode = 5
    86) s_names = names
    87) s_courses = courses
    88) s = T29
    90) x = T30
    91) v = 96
    92) T31 = x + 1
    93) x = T31
    94) T32 = x - 1
    95) x = T32
    96) T33 = 10 / 5
    97) result = 0


    --- Iteration 1 ---
    REDUNDANT EXPR ELIMINATION: In quadruple 11, replaced temporary 'T4' with 'T2'
    REDUNDANT EXPR ELIMINATION: In quadruple 30, replaced temporary 'T11' with 'T2'
    REDUNDANT EXPR ELIMINATION: In quadruple 54, replaced temporary 'T21' with 'T2'
    REDUNDANT EXPR ELIMINATION: In quadruple 26, replaced temporary 'T9' with 'T7'
    REDUNDANT EXPR ELIMINATION: In quadruple 33, replaced temporary 'T13' with 'T7'
    REDUNDANT EXPR ELIMINATION: In quadruple 43, replaced temporary 'T16' with 'T7'
    REDUNDANT EXPR ELIMINATION: In quadruple 50, replaced temporary 'T19' with 'T7'
    REDUNDANT EXPR ELIMINATION: In quadruple 57, replaced temporary 'T23' with 'T7'
    REDUNDANT EXPR ELIMINATION: In quadruple 59, replaced temporary 'T24' with 'T14'
    COPY PROPAGATION: In quadruple 12, replaced 'T4' with 'T2' in operand 1
    COPY PROPAGATION: In quadruple 27, replaced 'T9' with 'T7' in operand 1
    COPY PROPAGATION: In quadruple 31, replaced 'T11' with 'T2' in operand 1
    COPY PROPAGATION: In quadruple 34, replaced 'T13' with 'T7' in operand 1
    COPY PROPAGATION: In quadruple 44, replaced 'T16' with 'T7' in operand 1
    COPY PROPAGATION: In quadruple 51, replaced 'T19' with 'T7' in operand 1
    COPY PROPAGATION: In quadruple 55, replaced 'T21' with 'T2' in operand 1
    COPY PROPAGATION: In quadruple 58, replaced 'T23' with 'T7' in operand 1
    COPY PROPAGATION: In quadruple 60, replaced 'T24' with 'T14' in operand 1
    DEAD CODE ELIMINATION: Removed quadruple 11 defining unused temporary 'T4'
    DEAD CODE ELIMINATION: Removed quadruple 25 defining unused temporary 'T9'
    DEAD CODE ELIMINATION: Removed quadruple 28 defining unused temporary 'T11'
    DEAD CODE ELIMINATION: Removed quadruple 30 defining unused temporary 'T13'
    DEAD CODE ELIMINATION: Removed quadruple 39 defining unused temporary 'T16'
    DEAD CODE ELIMINATION: Removed quadruple 45 defining unused temporary 'T19'
    DEAD CODE ELIMINATION: Removed quadruple 48 defining unused temporary 'T21'
    DEAD CODE ELIMINATION: Removed quadruple 50 defining unused temporary 'T23'
    DEAD CODE ELIMINATION: Removed quadruple 51 defining unused temporary 'T24'
    DEAD CODE ELIMINATION: Removed quadruple 87 defining unused temporary 'T33'


    1) b = 1
    2) k = 0
    3) T0 = b + 1
    4) b = T0
    5) j = 0
    7) T2 = j + 1
    8) j = T2
    9) j = 0
    11) j = T2
    12) T5 = k + 1
    13) k = T5
    16) i = 1
    19) T7 = i + 1
    20) i = T7
    23) i = 0
    25) i = T7
    26) j = 0
    28) j = T2
    30) i = T7
    31) T14 = i - 1
    32) i = T14
    35) i = 1
    37) i = 0
    39) i = T7
    43) i = 0
    45) i = T7
    46) j = 0
    48) j = T2
    50) i = T7
    51) i = T14
    60) grades = T25
    62) p1_age = age
    63) p1_gender = gender
    64) p1_isStudent = isStudent
    65) p1_grades = grades
    66) p1 = T26
    70) courseCode = T27
    72) cs101_code = code
    73) cs101_duration = duration
    74) cs101 = T28
    75) studentCode = 5
    77) s_names = names
    78) s_courses = courses
    79) s = T29
    81) x = T30
    82) v = 96
    83) T31 = x + 1
    84) x = T31
    85) T32 = x - 1
    86) x = T32
    87) result = 0


    --- Iteration 2 ---


    1) b = 1
    2) k = 0
    3) T0 = b + 1
    4) b = T0
    5) j = 0
    7) T2 = j + 1
    8) j = T2
    9) j = 0
    11) j = T2
    12) T5 = k + 1
    13) k = T5
    16) i = 1
    19) T7 = i + 1
    20) i = T7
    23) i = 0
    25) i = T7
    26) j = 0
    28) j = T2
    30) i = T7
    31) T14 = i - 1
    32) i = T14
    35) i = 1
    37) i = 0
    39) i = T7
    43) i = 0
    45) i = T7
    46) j = 0
    48) j = T2
    50) i = T7
    51) i = T14
    60) grades = T25
    62) p1_age = age
    63) p1_gender = gender
    64) p1_isStudent = isStudent
    65) p1_grades = grades
    66) p1 = T26
    70) courseCode = T27
    72) cs101_code = code
    73) cs101_duration = duration
    74) cs101 = T28
    75) studentCode = 5
    77) s_names = names
    78) s_courses = courses
    79) s = T29
    81) x = T30
    82) v = 96
    83) T31 = x + 1
    84) x = T31
    85) T32 = x - 1
    86) x = T32
    87) result = 0

    ```

   ```

    Optimisation ended after 2 iterations

    ~~~~~~~~~~~~~~~~~~~~ Les Quadruplets ~~~~~~~~~~~~~~~~~~~~

    0 - ( BR  ,  55  ,  <vide>  ,  <vide> )
    --------------------------------------------

    1 - ( =  ,  1  ,  <vide>  ,  b )
    --------------------------------------------

    2 - ( =  ,  0  ,  <vide>  ,  k )
    --------------------------------------------

    3 - ( +  ,  b  ,  1  ,  T0 )
    --------------------------------------------

    4 - ( =  ,  T0  ,  <vide>  ,  b )
    --------------------------------------------

    5 - ( =  ,  0  ,  <vide>  ,  j )
    --------------------------------------------

    6 - ( BGE  ,  16  ,  j  ,  50 )
    --------------------------------------------

    7 - ( +  ,  j  ,  1  ,  T2 )
    --------------------------------------------

    8 - ( =  ,  T2  ,  <vide>  ,  j )
    --------------------------------------------

    9 - ( =  ,  0  ,  <vide>  ,  j )
    --------------------------------------------

    10 - ( BGE  ,  15  ,  j  ,  2 )
    --------------------------------------------

    11 - ( =  ,  T2  ,  <vide>  ,  j )
    --------------------------------------------

    12 - ( +  ,  k  ,  1  ,  T5 )
    --------------------------------------------

    13 - ( =  ,  T5  ,  <vide>  ,  k )
    --------------------------------------------

    14 - ( BR  ,  10  ,  <vide>  ,  <vide> )
    --------------------------------------------

    15 - ( BR  ,  3  ,  <vide>  ,  <vide> )
    --------------------------------------------

    16 - ( =  ,  1  ,  <vide>  ,  i )
    --------------------------------------------

    17 - ( BR  ,  68  ,  <vide>  ,  <vide> )
    --------------------------------------------

    18 - ( BGE  ,  22  ,  i  ,  6 )
    --------------------------------------------

    19 - ( +  ,  i  ,  1  ,  T7 )
    --------------------------------------------

    20 - ( =  ,  T7  ,  <vide>  ,  i )
    --------------------------------------------

    21 - ( BR  ,  18  ,  <vide>  ,  <vide> )
    --------------------------------------------

    22 - ( BR  ,  END  ,  <vide>  ,  <vide> )
    --------------------------------------------

    23 - ( =  ,  0  ,  <vide>  ,  i )
    --------------------------------------------

    24 - ( BGE  ,  35  ,  i  ,  10 )
    --------------------------------------------

    25 - ( =  ,  T7  ,  <vide>  ,  i )
    --------------------------------------------

    26 - ( =  ,  0  ,  <vide>  ,  j )
    --------------------------------------------

    27 - ( BGE  ,  34  ,  j  ,  5 )
    --------------------------------------------

    28 - ( =  ,  T2  ,  <vide>  ,  j )
    --------------------------------------------

    29 - ( BNE  ,  33  ,  i  ,  5 )
    --------------------------------------------

    30 - ( =  ,  T7  ,  <vide>  ,  i )
    --------------------------------------------

    31 - ( -  ,  i  ,  1  ,  T14 )
    --------------------------------------------

    32 - ( =  ,  T14  ,  <vide>  ,  i )
    --------------------------------------------

    33 - ( BR  ,  27  ,  <vide>  ,  <vide> )
    --------------------------------------------

    34 - ( BR  ,  24  ,  <vide>  ,  <vide> )
    --------------------------------------------

    35 - ( =  ,  1  ,  <vide>  ,  i )
    --------------------------------------------

    36 - ( BR  ,  END  ,  <vide>  ,  <vide> )
    --------------------------------------------

    37 - ( =  ,  0  ,  <vide>  ,  i )
    --------------------------------------------

    38 - ( BGE  ,  42  ,  i  ,  5 )
    --------------------------------------------

    39 - ( =  ,  T7  ,  <vide>  ,  i )
    --------------------------------------------

    40 - ( BLE  ,  41  ,  i  ,  2 )
    --------------------------------------------

    41 - ( BR  ,  38  ,  <vide>  ,  <vide> )
    --------------------------------------------

    42 - ( BR  ,  81  ,  <vide>  ,  <vide> )
    --------------------------------------------

    43 - ( =  ,  0  ,  <vide>  ,  i )
    --------------------------------------------

    44 - ( BGE  ,  54  ,  i  ,  5 )
    --------------------------------------------

    45 - ( =  ,  T7  ,  <vide>  ,  i )
    --------------------------------------------

    46 - ( =  ,  0  ,  <vide>  ,  j )
    --------------------------------------------

    47 - ( BGE  ,  53  ,  j  ,  7 )
    --------------------------------------------

    48 - ( =  ,  T2  ,  <vide>  ,  j )
    --------------------------------------------

    49 - ( BLE  ,  52  ,  j  ,  5 )
    --------------------------------------------

    50 - ( =  ,  T7  ,  <vide>  ,  i )
    --------------------------------------------

    51 - ( =  ,  T14  ,  <vide>  ,  i )
    --------------------------------------------

    52 - ( BR  ,  47  ,  <vide>  ,  <vide> )
    --------------------------------------------

    53 - ( BR  ,  44  ,  <vide>  ,  <vide> )
    --------------------------------------------

    54 - ( BR  ,  END  ,  <vide>  ,  <vide> )
    --------------------------------------------

    55 - ( BOUNDS  ,  1  ,  7  ,  <vide> )
    --------------------------------------------

    56 - ( BOUNDS  ,  2  ,  8  ,  <vide> )
    --------------------------------------------

    57 - ( BOUNDS  ,  3  ,  5  ,  <vide> )
    --------------------------------------------

    58 - ( BOUNDS  ,  4  ,  2  ,  <vide> )
    --------------------------------------------

    59 - ( ADEC  ,  grades  ,  <vide>  ,  <vide> )
    --------------------------------------------

    60 - ( =  ,  T25  ,  <vide>  ,  grades )
    --------------------------------------------

    61 - ( NEW  ,  Person  ,  <vide>  ,  p1 )
    --------------------------------------------

    62 - ( =  ,  age  ,  <vide>  ,  p1_age )
    --------------------------------------------

    63 - ( =  ,  gender  ,  <vide>  ,  p1_gender )
    --------------------------------------------

    64 - ( =  ,  isStudent  ,  <vide>  ,  p1_isStudent )
    --------------------------------------------

    65 - ( =  ,  grades  ,  <vide>  ,  p1_grades )
    --------------------------------------------

    66 - ( =  ,  T26  ,  <vide>  ,  p1 )
    --------------------------------------------

    67 - ( BR  ,  1  ,  <vide>  ,  <vide> )
    --------------------------------------------

    68 - ( BOUNDS  ,  1  ,  6  ,  <vide> )
    --------------------------------------------

    69 - ( ADEC  ,  courseCode  ,  <vide>  ,  <vide> )
    --------------------------------------------

    70 - ( =  ,  T27  ,  <vide>  ,  courseCode )
    --------------------------------------------

    71 - ( NEW  ,  Course  ,  <vide>  ,  cs101 )
    --------------------------------------------

    72 - ( =  ,  code  ,  <vide>  ,  cs101_code )
    --------------------------------------------

    73 - ( =  ,  duration  ,  <vide>  ,  cs101_duration )
    --------------------------------------------

    74 - ( =  ,  T28  ,  <vide>  ,  cs101 )
    --------------------------------------------

    75 - ( =  ,  5  ,  <vide>  ,  studentCode )
    --------------------------------------------

    76 - ( NEW  ,  Student  ,  <vide>  ,  s )
    --------------------------------------------

    77 - ( =  ,  names  ,  <vide>  ,  s_names )
    --------------------------------------------

    78 - ( =  ,  courses  ,  <vide>  ,  s_courses )
    --------------------------------------------

    79 - ( =  ,  T29  ,  <vide>  ,  s )
    --------------------------------------------

    80 - ( BR  ,  37  ,  <vide>  ,  <vide> )
    --------------------------------------------

    81 - ( =  ,  T30  ,  <vide>  ,  x )
    --------------------------------------------

    82 - ( =  ,  96  ,  <vide>  ,  v )
    --------------------------------------------

    83 - ( +  ,  x  ,  1  ,  T31 )
    --------------------------------------------

    84 - ( =  ,  T31  ,  <vide>  ,  x )
    --------------------------------------------

    85 - ( -  ,  x  ,  1  ,  T32 )
    --------------------------------------------

    86 - ( =  ,  T32  ,  <vide>  ,  x )
    --------------------------------------------

    87 - ( =  ,  0  ,  <vide>  ,  result )
    --------------------------------------------

    88 - ( BR  ,  END  ,  <vide>  ,  <vide> )
    --------------------------------------------
    ```
     
   * A file named `output.asm` (identical to `example.asm` in the repo) will be written.

---

### Unix-like Systems (Flex/Bison Manually)

1. **Open a Terminal** and **`cd`** into the repository root.

2. **Generate the scanner and parser** with Flex and Bison:

   ```bash
   flex lexical.l
   bison -d syntaxique.y
   ```

   * After these commands, you should see:

     * `lex.yy.c`
     * `syntaxique.tab.c`
     * `syntaxique.tab.h`

3. **Compile & Link**:

   ```bash
   gcc lex.yy.c syntaxique.tab.c -lfl -o compiler
   ```

4. **Verify**:

   ```bash
   ./compiler EXAMPLE.txt < EXAMPLE.txt
   ```

   * On success, you will see the printed quadruple list and a message that `output.asm` was generated.

---

## Running the Compiler

Once you have a working `compiler` (or `compiler.exe`), follow these steps to translate a source file into assembly and then into a runnable program:

1. **Prepare a Source File**

   * Create (or copy) a `.txt` file, for example `MyProg.txt`, containing Java‐like code conforming to the supported subset.

     ```java
     class MyProg {
       public static void main(String[] args) {
         int x;
         x = 42;
         if (x >= 10) {
           System.out.println("x is large");
         } else {
           System.out.println("x is small");
         }
         while (x > 0) {
           x = x - 1;
         }
         System.out.print("Done: ");
         System.out.println(x);
       }
     }
     ```

2. **Run the Compiler to Generate Assembly**

   ```bash
   ./compiler MyProg.txt < MyProg.txt
   ```

   * The compiler will:

     1. Perform lexical analysis according to `lexical.l`.
     2. Parse tokens via `syntaxique.y`, building/validating a symbol table (`ts.h` routines).
     3. Emit quadruples (`quad.h` routines), which you will see printed to `stdout`.
     4. Call `generate_assembly("output.asm")` (in `assembly.h`), which writes x86 code to `output.asm`.

3. **Verify & Inspect**

   * A file named `output.asm` now exists in the same folder.
   * You can open it to see the data section (format strings), code section, arithmetic instructions, comparisons, jump labels, etc...

---

## Extending or Modifying the Compiler

Because all of the core logic lives in these **eight** files—`lexical.l`, `syntaxique.y`, `ts.h`, `quad.h`, `assembly.h`, `commande.bat`, plus the three sample `.txt` files—you can easily extend functionality by editing exactly where you need:

* **Add a New Keyword or Token**:

  1. Modify `lexical.l`: add a new `"keyword"` pattern, update the token returned (e.g. `kwNEWKEYWORD`).
  2. Modify `syntaxique.y`: add `kwNEWKEYWORD` to the `%token` list and handle it in the grammar/semantic actions.

* **Add a New Data Type (`long`, `short`, etc.)**:

  1. Edit `lexical.l` to recognize the keyword (e.g. `"long"` → `kwLONG`).
  2. In `ts.h`, add a new `VarType` (e.g. `TYPE_LONG`).
  3. In `syntaxique.y`, permit declarations like `long x;`, call `insert_symbol("x", TYPE_LONG)`.
  4. In `quad.h`, decide how quadruples will represent long arithmetic (you might reuse `OP_ADD` etc., but adjust `emit_quad()` if needed).
  5. In `assembly.h`, extend `emit_quad_as_asm(...)` to handle 64-bit registers/long operations (e.g. use `%rax`, `movq`, `addq` if you target 64-bit).

* **Support `for` Loops or `switch` Statements**:

  1. Add new grammar rules in `syntaxique.y` (e.g. `for_stmt: FOR '(' assignment ';' condition ';' assignment ')' '{' statements '}' …`).
  2. Use `new_label()` / `backpatch()` to generate the quadruple pattern for a `for` loop.
  3. Add token recognition for `for` (already in `lexical.l` as `kwFOR`), so no need to change the lexer.

* **Introduce Method Definitions Beyond `main`**:

  1. Add grammar productions for a method header and method body in `syntaxique.y`.
  2. Extend `ts.h` (or create a separate "method table") to store method signatures.
  3. Modify `generate_assembly()` to produce separate labels for each method, allow `call`/`ret` quads.

* **Enhance Error Recovery**:

  * By default, `yyerror(...)` in `syntaxique.y` calls `exit(1)`. You can introduce Bison error productions (`error` token) and use `yyerrok;` to skip to the next statement rather than bailing out on the first error.

Because there are **no hidden dependencies**, every change is visible in these files. Simply re‐run Flex/Bison (or `commande.bat` on Windows) and recompile to pick up your modifications.

**Thank you for exploring the Simplified Java Compiler!** 
